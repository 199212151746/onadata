<h2>
	Activities
</h2>
<table id="activity-list" class="shade-alternate fullw padded">
	<thead>
		<tr>
			<th>Date</th>
			<th>Surveyor</th>
			<th>Title</th>
			<th>Survey Type
			</th>
		</tr>
	</thead>
</table>

<script id="activityRow" type="text/x-jquery-tmpl">
    <tr>
		<td class='date'>
			<span class="dt">${datetime}</span>
		</td>
		<td class='surveyor'>${surveyor}</td>
		<td class='title'>${title}</td>
		<td class='survey_type ${survey_type}'>${survey_type}</td>
	</tr>
</script>

<script type="text/javascript" charset="utf-8">
	/*- Uses jQuery $.tmpl to project activity-list onto table.
	- 
	-*/
	WithActivityList(function(list){
		var templateList = [],
			templ = $('#activityRow').template();

		//for some reason, the activity-list cannot be run through the $.tmpl()
		$(list.sort(function(a, b){return a.dateObj < b.dateObj})).each(function(){templateList.push(this)});
		$.tmpl(templ, templateList).appendTo($("#activity-list"))
		delete(templateList)
	});
	
	dashboard.get("#/activity", function(context){
		this.switchTo("activity");
        this.title("Activity");
    });

</script>