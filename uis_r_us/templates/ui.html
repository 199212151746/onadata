{% extends "ui_base.html" %}
{% block head %}
<style type="text/css" media="screen">
	#image-nav {
		display: none;
		padding: 3px 20px;
		height: 150px;
	}
	#image-nav .image-iwrap {
		width: 100%;
		overflow: auto;
		height: 130px;
	}
	#image-nav ul {
		width: 999em;
	}
	#image-nav li {
		list-style-type: none;
		margin-right: 8px;
	}
	.img-wrap {
		background-color: #666;
		width: 100px;
		height: 100px;
		border: 1px solid black;
		float: left;
	}
	#column-description {
		padding: 20px 10px;
		background-color: rgba(0,0,0,0.1);
		margin-top: 20px;
	}
	.column-data-wrap {}
	.column-data {
		margin: 4px 12px;
		color: #fff;
		background-color: rgba(0,0,0,0.5);
		border: 0 none;
		border-radius: 3px;
	}
	.col-info {
		margin: 2px 5px;
	}
	.col-info h2 {
		margin: 2px 0;
	}
	.col-info h3.description {
		margin: 2px 0;
		text-decoration: underline;
	}
	.sn-wrap {
		position: absolute;
		top: 200px;
		left: 0;
		z-index: 99;
	}
	.sn {
		margin: 3px 7px;
		background-color: #fff;
		width: 185px;
		padding: 6px 3px;
	}
	.sn ul {
		margin: 0;
		padding-left: 20px;
	}
	.sn ul ul {
		padding-left: 10px;
	}
	#facility-tabs.hide-tds td, #facility-tabs.hide-tds th {
		display: none;
	}
	#facility-tabs.hide-tds td.show-me, #facility-tabs.hide-tds th.show-me {
		display: table-cell;
	}
	
	/*--
	Right display div for facility popup
	--*/
	.rd-wrap {
		height: 65%;
		right: 0;
		position: absolute;
		z-index: 99
	}
	.right-div {
		background-color: #fff;
		margin: 4px 5px 5px 0;
	}
	.sub-sector-list a {
		display: block;
		float: left;
		margin: 3px 8px;
		text-decoration: none;
		border: 1px solid #999;
		color: #444;
		background-color: #eee;
		padding: 2px 6px;
		border-radius: 3px;
	}
	.sub-sector-list a:hover {
		background-color: #ddd;
	}
	.sub-sector-list a.selected {
		background-color: #ccc;
	}
</style>

{% endblock %}
{% block content %}
<div class='content-inner-wrap'>
	<div class="widget-outer-wrap" style="bottom:0">
		<div class="fullw-widget">
			<div id="lga-facilities-table"></div>
		</div>
	</div>
	<div id="map" class="resizing-map"></div>
</div>
{% endblock %}
{% block js %}
<script src="/static/js/application.js" type="text/javascript" charset="utf-8"></script>
<script src="/static/js/launch-open-layers.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript" charset="utf-8">
<!--
var debugMode = false;

var pageRootUrl = "/~";

var defaultSectorSlug = 'health';

var loadMap = true;
//var loadMap = $("input#load-map").attr('checked');

-->
</script>
<script src="/static/js/lga-dashboard.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript" charset="utf-8">
<!--

$('.content-inner-wrap').css({'padding':0})
$(function(){
	var dashboard = $.sammy(function(){
		function createTitleForLga(state, lga) {
			return $("<span />").text("LGA: ")
				.append($("<span />", {'class': 'state-name'}).text(state))
				.append($("<span />").text(' - '))
				.append($("<span />", {'class': 'lga-name'}).text(lga));
		}
		
		this.get(pageRootUrl, function(){
			//a basic lga selector in the main div (temporary)
			$('.content-inner-wrap').html((function(){
				var hf = $("#header form").clone();
				hf.find('.lga-nav').css({'position':'static'});
				return $("<div />")
					.append($("<h2 />").text("Select an LGA"))
					.append(hf)
					.css({'padding':'20px 30px'});
			})());
		});
		this.get(pageRootUrl + ":lga/(.+)", function(){
			var lgaId = this.params.lga;
			this.params.splat.length !== 1 && warn("Sammy needs some help selecting a sector.");
			var fullSectorId = this.params.splat[0];
			lga.loadData(lgaId,
							function(){
								this.buildTable = true;
								var t = createTitleForLga(this.stateName, this.lgaName);
								setTitle(t);
								this.trigger('select-sector', {
									fullSectorId: fullSectorId
								});
							});
		})
		this.get(pageRootUrl + ":lga", function(){
			var lgaId = this.params.lga;
			lga.loadData(lgaId,
							function(){
								this.buildTable = true;
								var t = createTitleForLga(this.stateName, this.lgaName);
								setTitle(t);
							});
		});
	});
	
	window._dashboard = dashboard;
	dashboard.run();
});

// SetResizer is defiend in application.js
//   its purpose is to trigger "full-height" whenever the page is resized.
//   it has some weird side-effects on mobile browsers.
SetResizer(jQuery, ".content-inner-wrap", "#header, #menu", 15);

-->
</script>
{% endblock %}
